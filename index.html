<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pronunciation Master - 발음 명료도 평가</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- 상단 헤더 -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-microphone-alt"></i>
                <h1>Pronunciation Master</h1>
                <span class="beta-tag">BETA</span>
            </div>
            <div class="level-badge" id="currentLevel">
                <span>S?</span>
            </div>
        </header>

        <!-- 메인 컨텐츠 -->
        <main class="main-content">
            <!-- 단계 1: 시작 화면 -->
            <section id="startScreen" class="screen active">
                <div class="welcome-card">
                    <div class="welcome-icon">
                        <i class="fas fa-language"></i>
                    </div>
                    <h2>발음 명료도 완전 평가</h2>
                    <p class="subtitle">20문장으로 정확한 S레벨을 측정하세요</p>
                    
                    <div class="feature-list">
                        <div class="feature">
                            <i class="fas fa-check-circle"></i>
                            <span>음소별 상세 분석 (L/R, P/F 등)</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-check-circle"></i>
                            <span>S1~S10 명확한 레벨 체계</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-check-circle"></i>
                            <span>맞춤형 발음 개선 피드백</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-check-circle"></i>
                            <span>과학적 평가 알고리즘</span>
                        </div>
                    </div>

                    <div class="time-estimate">
                        <i class="fas fa-clock"></i>
                        <span>예상 시간: 8-10분</span>
                    </div>

                    <button id="startBtn" class="btn-primary">
                        <i class="fas fa-play"></i>
                        평가 시작하기
                    </button>

                    <div class="test-info">
                        <p><i class="fas fa-headphones"></i> 헤드폰 사용을 권장합니다</p>
                        <p><i class="fas fa-volume-mute"></i> 조용한 환경에서 진행해주세요</p>
                    </div>
                </div>
            </section>

            <!-- 단계 2: 마이크 캘리브레이션 -->
            <section id="calibrationScreen" class="screen">
                <div class="calibration-card">
                    <div class="step-indicator">
                        <span class="step active">1</span>
                        <span class="step-line"></span>
                        <span class="step">2</span>
                        <span class="step-line"></span>
                        <span class="step">3</span>
                        <span class="step-line"></span>
                        <span class="step">4</span>
                    </div>
                    <h2><i class="fas fa-sliders-h"></i> 마이크 설정</h2>
                    
                    <div class="calibration-instruction">
                        <p>아래 문장을 명확하게 읽어주세요</p>
                        <div class="calibration-text">
                            "Test, one two three, microphone check"
                        </div>
                    </div>

                    <div class="audio-visualizer">
                        <canvas id="volumeMeter" width="300" height="80"></canvas>
                        <div class="volume-labels">
                            <span>소음</span>
                            <span>적정</span>
                            <span>과다</span>
                        </div>
                    </div>

                    <div class="calibration-controls">
                        <button id="recordCalibrationBtn" class="btn-secondary">
                            <i class="fas fa-circle"></i>
                            녹음 시작
                        </button>
                        <div class="recording-timer">00:03</div>
                        <button id="playCalibrationBtn" class="btn-secondary" disabled>
                            <i class="fas fa-play"></i>
                            재생
                        </button>
                    </div>

                    <div class="calibration-results hidden" id="calibrationResults">
                        <h3><i class="fas fa-chart-bar"></i> 캘리브레이션 결과</h3>
                        <div class="result-grid">
                            <div class="result-item">
                                <span class="result-label">음량</span>
                                <div class="result-bar">
                                    <div class="bar-fill" id="volumeBar"></div>
                                </div>
                                <span class="result-value" id="volumeValue">- dB</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">소음</span>
                                <div class="result-bar">
                                    <div class="bar-fill" id="noiseBar"></div>
                                </div>
                                <span class="result-value" id="noiseValue">- dB</span>
                            </div>
                        </div>
                        <div id="calibrationFeedback" class="feedback-message"></div>
                    </div>

                    <div class="navigation-buttons">
                        <button id="backToStartBtn" class="btn-outline">
                            <i class="fas fa-arrow-left"></i>
                            돌아가기
                        </button>
                        <button id="proceedToTestBtn" class="btn-primary" disabled>
                            다음 단계
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </section>

            <!-- 단계 3: 평가 진행 화면 -->
            <section id="testScreen" class="screen">
                <div class="test-container">
                    <!-- 진행 상태 -->
                    <div class="progress-section">
                        <div class="progress-header">
                            <h2>발음 평가 진행중</h2>
                            <div class="round-badge" id="currentRound">기초 명료도</div>
                        </div>
                        
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <div class="progress-text">
                                <span id="currentSentence">1</span> / <span id="totalSentences">20</span> 문장
                            </div>
                        </div>

                        <div class="timer-display">
                            <i class="fas fa-clock"></i>
                            <span id="testTimer">00:00</span>
                        </div>
                    </div>

                    <!-- 현재 문장 -->
                    <div class="sentence-card">
                        <div class="sentence-header">
                            <div class="difficulty-badge" id="difficultyBadge">기초</div>
                            <div class="phoneme-tags" id="phonemeTags"></div>
                        </div>
                        
                        <div class="sentence-text" id="currentSentenceText">
                            문장이 여기에 표시됩니다
                        </div>

                        <div class="reference-audio">
                            <button id="playReferenceBtn" class="btn-icon">
                                <i class="fas fa-volume-up"></i>
                                원어민 발음 듣기
                            </button>
                            <div class="play-count">
                                <i class="fas fa-redo"></i>
                                <span id="playCount">3</span>회 재생 가능
                            </div>
                        </div>
                    </div>

                    <!-- 녹음 컨트롤 -->
                    <div class="recording-section">
                        <div class="recording-status">
                            <div class="status-indicator" id="statusIndicator">
                                <div class="status-dot"></div>
                                <span>준비</span>
                            </div>
                            <div class="recording-timer-large" id="recordingTimer">00:00</div>
                        </div>

                        <div class="recording-controls">
                            <button id="startRecordingBtn" class="btn-record">
                                <i class="fas fa-microphone"></i>
                                <span>녹음 시작</span>
                            </button>
                            <button id="stopRecordingBtn" class="btn-stop hidden">
                                <i class="fas fa-square"></i>
                                <span>녹음 정지</span>
                            </button>
                            <button id="playRecordingBtn" class="btn-secondary" disabled>
                                <i class="fas fa-play"></i>
                                내 발음 듣기
                            </button>
                            <button id="reRecordBtn" class="btn-outline" disabled>
                                <i class="fas fa-redo"></i>
                                다시 녹음
                            </button>
                        </div>

                        <div class="waveform-container">
                            <canvas id="waveformCanvas" width="600" height="100"></canvas>
                        </div>
                    </div>

                    <!-- 실시간 피드백 -->
                    <div class="live-feedback" id="liveFeedback">
                        <h3><i class="fas fa-bolt"></i> 실시간 분석</h3>
                        <div class="feedback-grid">
                            <div class="feedback-item">
                                <span class="feedback-label">명료도</span>
                                <div class="feedback-score">
                                    <div class="score-bar">
                                        <div class="score-fill" id="clarityBar"></div>
                                    </div>
                                    <span class="score-value" id="clarityScore">0%</span>
                                </div>
                            </div>
                            <div class="feedback-item">
                                <span class="feedback-label">속도</span>
                                <div class="feedback-score">
                                    <span class="speed-value" id="speedValue">적정</span>
                                </div>
                            </div>
                            <div class="feedback-item">
                                <span class="feedback-label">발음 점수</span>
                                <div class="feedback-score">
                                    <div class="score-bar">
                                        <div class="score-fill" id="pronunciationBar"></div>
                                    </div>
                                    <span class="score-value" id="pronunciationScore">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 네비게이션 -->
                    <div class="test-navigation">
                        <button id="prevSentenceBtn" class="btn-outline" disabled>
                            <i class="fas fa-arrow-left"></i>
                            이전 문장
                        </button>
                        <div class="skip-option">
                            <button id="skipSentenceBtn" class="btn-text">
                                <i class="fas fa-forward"></i>
                                이 문장 건너뛰기
                            </button>
                        </div>
                        <button id="nextSentenceBtn" class="btn-primary" disabled>
                            다음 문장
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </section>

            <!-- 단계 4: 결과 화면 -->
            <section id="resultScreen" class="screen">
                <div class="result-container">
                    <!-- 레벨 표시 -->
                    <div class="level-display">
                        <div class="level-badge-large" id="finalLevelBadge">
                            <span class="level-letter">S</span>
                            <span class="level-number" id="finalLevelNumber">?</span>
                        </div>
                        <div class="level-info">
                            <h2>당신의 발음 명료도 레벨은</h2>
                            <h1 class="level-title" id="levelTitle">S?</h1>
                            <p class="level-description" id="levelDescription">
                                평가가 완료되면 여기에 설명이 표시됩니다
                            </p>
                        </div>
                    </div>

                    <!-- 종합 점수 -->
                    <div class="score-summary">
                        <div class="score-card">
                            <div class="score-icon">
                                <i class="fas fa-bullseye"></i>
                            </div>
                            <div class="score-content">
                                <h3>전체 명료도</h3>
                                <div class="score-value-large" id="overallScore">0%</div>
                                <div class="score-progress">
                                    <div class="progress-circle">
                                        <svg width="80" height="80">
                                            <circle class="progress-bg" cx="40" cy="40" r="35"></circle>
                                            <circle class="progress-fill" id="overallCircle" cx="40" cy="40" r="35"></circle>
                                        </svg>
                                        <span class="progress-text" id="overallPercent">0%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="score-details">
                            <div class="detail-item">
                                <span class="detail-label">기초 명료도</span>
                                <div class="detail-score">
                                    <div class="detail-bar">
                                        <div class="detail-fill" id="basicClarityBar"></div>
                                    </div>
                                    <span id="basicClarityScore">0%</span>
                                </div>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">음소 구분</span>
                                <div class="detail-score">
                                    <div class="detail-bar">
                                        <div class="detail-fill" id="phonemeBar"></div>
                                    </div>
                                    <span id="phonemeScore">0%</span>
                                </div>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">억양 리듬</span>
                                <div class="detail-score">
                                    <div class="detail-bar">
                                        <div class="detail-fill" id="intonationBar"></div>
                                    </div>
                                    <span id="intonationScore">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 음소별 분석 -->
                    <div class="phoneme-analysis">
                        <h3><i class="fas fa-chart-pie"></i> 음소별 정확도</h3>
                        <div class="phoneme-grid" id="phonemeGrid">
                            <!-- 동적 생성 -->
                        </div>
                    </div>

                    <!-- 피드백 및 추천 -->
                    <div class="feedback-section">
                        <div class="improvement-card">
                            <h3><i class="fas fa-star"></i> 주요 강점</h3>
                            <ul class="strength-list" id="strengthList">
                                <!-- 동적 생성 -->
                            </ul>
                        </div>
                        <div class="improvement-card">
                            <h3><i class="fas fa-tools"></i> 개선 필요 항목</h3>
                            <ul class="improvement-list" id="improvementList">
                                <!-- 동적 생성 -->
                            </ul>
                        </div>
                    </div>

                    <!-- 추천 연습 -->
                    <div class="practice-recommendation">
                        <h3><i class="fas fa-dumbbell"></i> 추천 연습</h3>
                        <div class="practice-list" id="practiceList">
                            <!-- 동적 생성 -->
                        </div>
                    </div>

                    <!-- 액션 버튼 -->
                    <div class="result-actions">
                        <button id="retakeTestBtn" class="btn-primary">
                            <i class="fas fa-redo"></i>
                            다시 평가하기
                        </button>
                        <button id="shareResultBtn" class="btn-secondary">
                            <i class="fas fa-share-alt"></i>
                            결과 공유하기
                        </button>
                        <button id="downloadReportBtn" class="btn-outline">
                            <i class="fas fa-download"></i>
                            리포트 다운로드
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <!-- 푸터 -->
        <footer class="footer">
            <p>Pronunciation Master © 2024 | 과학적 발음 평가 시스템</p>
            <div class="footer-links">
                <a href="#" id="privacyLink"><i class="fas fa-shield-alt"></i> 개인정보처리방침</a>
                <a href="#" id="aboutLink"><i class="fas fa-info-circle"></i> 평가 방법</a>
                <a href="#" id="contactLink"><i class="fas fa-envelope"></i> 문의하기</a>
            </div>
        </footer>
    </div>

    <!-- 모달 창 -->
    <div id="infoModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-info-circle"></i> 평가 방법 안내</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p>이 평가 시스템은 발음 명료도를 S1~S10 레벨로 측정합니다.</p>
                <ul>
                    <li><strong>S1-S3:</strong> 기본 발음 교정 필요</li>
                    <li><strong>S4-S6:</strong> 원활한 의사소통 가능</li>
                    <li><strong>S7-S9:</strong> 원어민에 가까운 발음</li>
                    <li><strong>S10:</strong> 완벽한 명료도</li>
                </ul>
                <p>각 문장은 특정 음소 발음 평가를 위해 설계되었습니다.</p>
                <p>녹음은 최대 10초까지 가능하며, 실시간 분석이 제공됩니다.</p>
            </div>
        </div>
    </div>

    <!-- 로딩 오버레이 -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p id="loadingText">음성 분석 중...</p>
        </div>
    </div>

    <!-- 결과 공유 모달 -->
    <div id="shareModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-share-alt"></i> 결과 공유하기</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="share-options">
                    <button class="share-option-btn" id="copyLinkBtn">
                        <i class="fas fa-link"></i>
                        링크 복사
                    </button>
                    <button class="share-option-btn" id="twitterShareBtn">
                        <i class="fab fa-twitter"></i>
                        트위터
                    </button>
                    <button class="share-option-btn" id="facebookShareBtn">
                        <i class="fab fa-facebook"></i>
                        페이스북
                    </button>
                </div>
                <div class="share-preview">
                    <p>내 발음 레벨: <strong id="shareLevel">S?</strong></p>
                    <p>전체 명료도: <strong id="shareScore">0%</strong></p>
                </div>
            </div>
        </div>
    </div>

    <!-- 단일 스크립트 파일로 통합 -->
    <script src="pronunciation-master.js"></script>
</body>
</html>
